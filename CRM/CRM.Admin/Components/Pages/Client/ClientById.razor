@page "/clientById/{clientId}"
@using CRM.Admin.Data.OrderDto

<MudGrid Style="margin-top: 20px">
<MudItem xs="12">
<MudTabs Elevation="4" Rounded="true" Style="color: #0a5702;">
<MudTabPanel Text="Інформація" ToolTip="Інформація про туриста">
<MudGrid Style="margin-top: 2px">
<MudItem xs="5">
    <MudCard Class="client-card">
        <MudCardContent>
            <MudGrid>
                <MudItem xs="6">
                    <MudText Typo="Typo.h6">Основна інформація</MudText>
                </MudItem>
                <MudItem xs="6" Style="text-align: right;">
                    <MudButton
                        Variant="Variant.Outlined"
                        OnClick="ChangeClientInfo"
                        StartIcon="@Icons.Material.Filled.Edit"
                        Size="Size.Small">
                        змінити
                    </MudButton>
                </MudItem>
            </MudGrid>
            <MudGrid>
                <MudItem xs="6">
                    <MudText Style="margin-top: 16px;">ПІБ:</MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText Style="margin-top: 10px;">
                        <i>@_clientDto.Surname @_clientDto.Name @_clientDto.Patronymic</i>
                    </MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>День народження:</MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>
                        <i>@_clientDto.DateOfBirth</i>
                    </MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>Телефон:</MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>
                        <i>@_clientDto.Phone</i>
                    </MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>Електронна пошта:</MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>
                        <i>@_clientDto.Email</i>
                    </MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>Національність:</MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>
                        <i>@_passportInternalDto.Nationality</i>
                    </MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>Адреса:</MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>
                        <i>@_clientDto.Address</i>
                    </MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>Коментар:</MudText>
                </MudItem>
                <MudItem xs="6">
                    <MudText>
                        <i>@_clientDto.Comment</i>
                    </MudText>
                </MudItem>
            </MudGrid>
        </MudCardContent>
    </MudCard>
</MudItem>

<MudItem xs="7">
    <MudCard Class="client-card">
        <MudCardContent>
            <MudGrid>
                <MudItem xs="6">
                    <MudText Typo="Typo.h6">Паспортні дані</MudText>
                </MudItem>
                <MudItem xs="6" Style="text-align: right;">
                    <MudButton
                        Variant="Variant.Outlined"
                        OnClick="ChangePassportInfo"
                        StartIcon="@Icons.Material.Filled.Edit"
                        Size="Size.Small">
                        змінити
                    </MudButton>
                </MudItem>
            </MudGrid>

            <MudGrid>
                <MudItem xs="6">
                    <MudText Style="margin-top: 16px;" Typo="Typo.overline">ВНУТРІШНІЙ ПАСПОРТ</MudText>
                    <MudGrid>
                        <MudItem xs="6">
                            <MudText>Серія паспорту:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternalDto.RecordNo</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Номер паспорта:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternalDto.DocumentNo</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Ким виданий:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternalDto.Authority</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Дійсний до:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternalDto.ExpiryDate</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Дата видачі:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternalDto.DateOfIssue</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Адреса прописки: </MudText>
                            <MudText>
                                <i> @_passportInternalDto.PlaceOfBirth</i>
                            </MudText>

                            <MudText>ІПН: <i>@_passportInternalDto.TaxpayerNo</i></MudText>
                        </MudItem>
                    </MudGrid>
                </MudItem>

                <MudItem xs="6">
                    <MudText Style="margin-top: 16px;" Typo="Typo.overline">ЗАКОРДОННИЙ ПАСПОРТ</MudText>
                    <MudGrid>
                        <MudItem xs="6">
                            <MudText>Прізвище латиницею:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternationalDto.SurnameLatinScript</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Ім'я латиницею:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternationalDto.NameLatinScript</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Серія паспорту:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternationalDto.RecordNo</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Номер паспорта:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternationalDto.DocumentNo</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Ким виданий:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternationalDto.Authority</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Дата видачі:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternationalDto.DateOfIssue</i>
                            </MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>Дійсний до:</MudText>
                        </MudItem>
                        <MudItem xs="6">
                            <MudText>
                                <i>@_passportInternationalDto.ExpiryDate</i>
                            </MudText>
                        </MudItem>
                    </MudGrid>
                </MudItem>
            </MudGrid>
        </MudCardContent>
    </MudCard>
</MudItem>
</MudGrid>
</MudTabPanel>
<MudTabPanel Text="Замовлення" ToolTip="Замовлення туриста">
    <MudTable ServerData="@(new Func<TableState, Task<TableData<OrderDto>>>(ServerReload))"
              Dense="true" Hover="true" @ref="_table">
        <ToolBarContent>
            <MudText Typo="Typo.h6">Подорожі туриста: @_clientDto.Name @_clientDto.Surname</MudText>
            <MudSpacer/>
            <MudTextField T="string" ValueChanged="@(s => OnSearch(s))" Placeholder="Search" Adornment="Adornment.Start"
                          AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0">
            </MudTextField>
        </ToolBarContent>
        <HeaderContent>
            <MudTh>
                <MudTableSortLabel SortLabel="Date" T="OrderDto">Дата створення</MudTableSortLabel>
            </MudTh>
            <MudTh>
                <MudTableSortLabel SortLabel="CountryToName" T="OrderDto">Країна</MudTableSortLabel>
            </MudTh>
            <MudTh>
                <MudTableSortLabel SortLabel="Stays" T="OrderDto">Проживання</MudTableSortLabel>
            </MudTh>
            <MudTh>
                <MudTableSortLabel SortLabel="DateFrom" T="OrderDto">Дата</MudTableSortLabel>
            </MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Дата створення">@context.CreatedAt.ToShortDateString()</MudTd>
            <MudTd DataLabel="Країна">@context.CountryToName</MudTd>
            <MudTd DataLabel="Проживання">
                @foreach (var stay in context.Stays)
                {
                    @stay.HotelName
                }
            </MudTd>
            <MudTd DataLabel="Дата"> з @context.DateFrom.ToShortDateString() до @context.DateTo.ToShortDateString()</MudTd>
        </RowTemplate>
        <NoRecordsContent>
            <MudText>No matching records found</MudText>
        </NoRecordsContent>
        <LoadingContent>
            <MudText>Loading...</MudText>
        </LoadingContent>
        <PagerContent>
            <MudTablePager/>
        </PagerContent>
    </MudTable>
</MudTabPanel>
</MudTabs>
</MudItem>
</MudGrid>